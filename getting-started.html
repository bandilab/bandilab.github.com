<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>bandicoot - getting started</title>
    
    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="/stylesheets/extensions.css">
    <link rel="stylesheet" href="/stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      
      
      

      <header>
        <h1 id='bandicoot'>Bandicoot</h1>

<p><a href='/getting-started.html'>Getting Started</a></p>

<p><a href='/specification.html'>Specification</a></p>

<p><a href='/webapps.html'>Webapps</a></p>

<p><a href='/download.html'>Download</a></p>

<p><a href='/blog.html'>Blog</a></p>

<p><a href='/about.html'>About</a></p>
        
      </header>
      <section>
        
        <h2 id='start_up'>Start Up</h2>
<div class='highlight'><pre><code class='bash'><span class='nv'>$ </span>tar xvfz bandicoot-v5.tar.gz
<span class='nv'>$ </span><span class='nb'>cd </span>bandicoot-v5/examples
<span class='nv'>$ </span>mkdir volume
<span class='nv'>$ </span>./bandicoot start -p 12345 -c program.b -d volume -s tx.state
</code></pre>
</div>
<p>To stop Bandicoot simply kill it or press CTRL-C in the terminal. All in-progress transactions will be rolled back automatically.</p>

<h2 id='programs'> Programs</h2>

<p>Bandicoot programs are defined in text files similar to other programming languages (e.g. C, Java). Conventional file suffix is <code>.b</code>. The programs are written in <b>Bandicoot language</b> and they define types, variables, and functions. Here is an example which defines type Books and function Echo:</p>

<pre><code>type Books {
   title string,
   genre string,
   price real,
   pages int
}

fn Echo(b Books) Books
{
    return b;
}</code></pre>

<h2 id='api'> API</h2>

<p>Every function is automatically exposed via HTTP. For example the Echo function declared above will have the following URL: <code>http://localhost:12345/Echo</code>. If a function takes a relational parameter, it needs to be called with the HTTP POST method. Otherwise, the HTTP GET method is required.</p>

<p>Bandicoot uses a CSV (Comma Separated Values) format to exchange the data. The first line defines the attributes of a relation and the remaining lines contain values (tuples).</p>
<div class='highlight'><pre><code class='bash'><span class='nv'>$ </span>cat one.csv
title string,pages int,price real,genre string
Robinson Crusoe,312,11.21,Novel
</code></pre>
</div><div class='highlight'><pre><code class='bash'><span class='nv'>$ </span>curl --data-binary @one.csv http://localhost:12345/Echo
genre string,pages int,price real,title string
Novel,312,11.21,Robinson Crusoe
</code></pre>
</div>
<p>N.B.: examples use the curl command line utility from a terminal window (&#8211;data-binary @file is the syntax for submitting a file via HTTP POST). Obviously, you can use any other tools and libraries which support HTTP/1.1 (unfortunately, the wget tool supports only HTTP/1.0 and hence it does not work with Bandicoot).</p>

<h2 id='no_duplicates_no_order'> No Duplicates, No Order</h2>

<p>The Echo function removes duplicate tuples. The reason is due to the nature of Relation. Relations are mathematical sets of tuples and do not allow duplicates. Moreover, keep in mind that sets do not have order and hence the tuples can be returned in a different order:</p>
<div class='highlight'><pre><code class='bash'><span class='nv'>$ </span>cat duplicate.csv
title string,pages int,price real,genre string
Oliver Twist,608,12.99,Fiction
Robinson Crusoe,312,11.21,Novel
Robinson Crusoe,312,11.21,Novel
</code></pre>
</div><div class='highlight'><pre><code class='bash'><span class='nv'>$ </span>curl --data-binary @duplicate.csv http://localhost:12345/Echo
genre string,pages int,price real,title string
Novel,312,11.21,Robinson Crusoe
Fiction,608,12.99,Oliver Twist
</code></pre>
</div>
<h2 id='data_manipulation'> Data Manipulation</h2>

<p>Bandicoot defines 8 relational operators: rename, project, extend, select, union, join, minus, and summary (see the <a href='specification.html'>specification</a> page or a relational algebra <a href='bandicoot-algebra.pdf'>diagram</a> for details).</p>

<p>The operators take one or more relations as input, perform a specific action, and return a new relation as output. This principle allows chaining the operators in a single statement to perform multiple actions.</p>

<p>Functions are the primary means of accessing and changing data in Bandicoot. If you do complex calculations and you wish to reuse the results within a function, you can use <em>temporary variables</em>. The type of a temporary variable is determined from the value assigned to it and the value is immutable.</p>

<pre><code># selects fiction books from the input
fn Fiction(b Books) Books
{
    return select genre == &quot;Fiction&quot; b;
}

# calculates an average price of fiction books
fn FictionPrice(b Books) {avgPrice real}
{
    # use of a temporary variable and a chained statement
    var res = summary avgPrice = (avg price 0.0)
                      (select genre == &quot;Fiction&quot; b);

    return res;
}</code></pre>
<div class='highlight'><pre><code class='bash'><span class='nv'>$ </span>cat books.csv
title string,pages int,price real,genre string
The Iliad,576,26.40,Poetry
The Odyssey,416,19.95,Poetry
Oliver Twist,608,12.99,Fiction
</code></pre>
</div><div class='highlight'><pre><code class='bash'><span class='nv'>$ </span>curl --data-binary @books.csv http://localhost:12345/Fiction
genre string,pages int,price real,title string
Fiction,608,12.99,Oliver Twist
</code></pre>
</div><div class='highlight'><pre><code class='bash'><span class='nv'>$ </span>curl --data-binary @books.csv http://localhost:12345/FictionPrice
avgPrice real
12.99
</code></pre>
</div>
<h2 id='data_persistence'> Data Persistence</h2>

<p>Bandicoot provides data persistence automatically and transparently by using <em>global variables</em>. They keep the data among different invocations of functions and Bandicoot restarts. The variables are saved to a directory specified as <code>-d</code> parameter during start up.</p>

<p>The global variables are always modified within a transaction. If a function modifies one ore more global variables the new content becomes available after the function executes successfully. In case of an error the changes are rolled back immediately.</p>

<pre><code>var books Books;

fn Write(b Books) void
{
    books = b;
}

fn Titles() {title string}
{
    return books;
}</code></pre>
<div class='highlight'><pre><code class='bash'><span class='nv'>$ </span>curl --data-binary @books.csv http://localhost:12345/Write
</code></pre>
</div><div class='highlight'><pre><code class='bash'><span class='nv'>$ </span>curl http://localhost:12345/Titles
title string
The Iliad
The Odyssey
Oliver Twist
</code></pre>
</div>
<p>N.B: there are some limitations while working with global variables:</p>

<ul>
<li>only one assignment per variable is possible within a function</li>

<li>once assigned, the new value cannot be read. If it is required to reuse the value, you can use temporary variables which allow multiple reads.</li>
</ul>

<h2 id='insert_update_and_delete'> Insert, Update, and Delete</h2>

<p>Bandicoot has one approach for changing the data: assignment. This means that there is no separate insert, update or delete operator and all these actions are implemented via assignment.</p>

<p>Adding of new tuples to an existing set is achieved with the help of the union operator (<code>+</code> symbol). The union merges two sets of tuples together and removes any duplicate entries.</p>

<p>Updates are implemented with the help of the extend operator. Once the data set has been extended, you need to replace the existing attribute with a new one.</p>

<p>In case of a delete there are several options how to remove the desired set of tuples from relational variable. The DeleteFiction function defined below removes all the tuples which do not match to the given boolean expression.</p>

<pre><code>fn AddBooks(b Books) void
{
    books = books + b;
}

fn UpdatePrice() void
{
    books = rename price = reduced
                   (project title, genre, pages, reduced
                            (extend reduced = price * 0.90 books));
}

fn DeleteFiction() void
{
    books = select genre != &quot;Fiction&quot; books;
}</code></pre>

<p>Insert Example:</p>
<div class='highlight'><pre><code class='bash'><span class='nv'>$ </span>curl http://localhost:12345/Titles
title string
The Iliad
The Odyssey
Oliver Twist

<span class='nv'>$ </span>cat more-books.csv
title string,pages int,price real,genre string
Oliver Twist,608,12.99,Fiction
Grimm<span class='s1'>&#39;s Fairy Stories,560,14.50,Fairy tales</span>

<span class='s1'>$ curl --data-binary @more-books.csv http://localhost:12345/AddBooks</span>

<span class='s1'>$ curl http://localhost:12345/Titles</span>
<span class='s1'>title string</span>
<span class='s1'>The Iliad</span>
<span class='s1'>The Odyssey</span>
<span class='s1'>Oliver Twist</span>
<span class='s1'>Grimm&#39;</span>s Fairy Stories
</code></pre>
</div>
<p>Update Example:</p>
<div class='highlight'><pre><code class='bash'><span class='nv'>$ </span>curl http://localhost:12345/Prices
price real,title string
26.4,The Iliad
19.95,The Odyssey
12.99,Oliver Twist
14.5,Grimm<span class='s1'>&#39;s Fairy Stories</span>

<span class='s1'>$ curl http://localhost:12345/UpdatePrice</span>

<span class='s1'>$ curl http://localhost:12345/Prices</span>
<span class='s1'>price real,title string</span>
<span class='s1'>23.76,The Iliad</span>
<span class='s1'>17.955,The Odyssey</span>
<span class='s1'>11.691,Oliver Twist</span>
<span class='s1'>13.05,Grimm&#39;</span>s Fairy Stories
</code></pre>
</div>
<p>Delete Example:</p>
<div class='highlight'><pre><code class='bash'><span class='nv'>$ </span>curl http://localhost:12345/Titles
title string
The Iliad
The Odyssey
Oliver Twist
Grimm<span class='s1'>&#39;s Fairy Stories</span>

<span class='s1'>$ curl http://localhost:12345/DeleteFiction</span>

<span class='s1'>$ curl http://localhost:12345/Titles</span>
<span class='s1'>title string</span>
<span class='s1'>The Iliad</span>
<span class='s1'>The Odyssey</span>
<span class='s1'>Grimm&#39;</span>s Fairy Stories
</code></pre>
</div>
<p>Now you know enough to start writing your own Bandicoot applications. If you are thinking of using Bandicoot with the JavaScript, you can find some useful information on the <a href='webapps.html'>webapps</a> page.</p>
      </section>
      <footer><p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
<p><small>&copy; 2012 bandilab.org</small></p>
</footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
  </body>
</html>
